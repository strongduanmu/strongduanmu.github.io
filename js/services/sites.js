utils.jq(()=>{$(function(){const s=document.getElementsByClassName("ds-sites");for(var e=0;e<s.length;e++){const t=s[e],a=t.getAttribute("api");if(null==a)continue;const r=def.avatar,l=def.cover;utils.request(t,a,function(s){for(let a of s.content){var e='<div class="grid-cell site-card">';e+=`<a class="card-link" target="_blank" rel="external nofollow noopener noreferrer" href="${a.url}">`,e+=`<img src="${a.cover||a.snapshot||a.screenshot}" onerror="javascript:this.removeAttribute('data-src');this.src='${l}';"/>`,e+='<div class="info">',e+=`<img src="${a.icon||a.avatar||r}" onerror="javascript:this.removeAttribute('data-src');this.src='${r}';"/>`,e+=`<span class="title">${a.title}</span>`,e+=`<span class="desc">${a.description||a.url}</span>`,e+="</div>",e+='<div class="labels">';for(let s of a.labels)s.lightness>75?e+=`<div class="label" style="background:#${s.color};color:hsla(${s.hue}, ${s.saturation}%, 20%, 1);">${s.name}</div>`:s.saturation>90&&s.lightness>40?e+=`<div class="label" style="background:#${s.color};color:hsla(${s.hue}, 50%, 20%, 1);">${s.name}</div>`:e+=`<div class="label" style="background:#${s.color};color:white">${s.name}</div>`;e+="</div>",e+="</a>",e+="</div>",$(t).find(".grid-box").append(e)}})}})});