!function(){"use strict";function e(){var e=!1,t=null;function o(o){const n=function(){if("1"===new URLSearchParams(window.location.search).get("test-adblock"))return console.log("[Adblock Detector] TEST MODE: Simulating ad block detection"),!0;const e=document.querySelector('script[src*="pagead2.googlesyndication.com"]');if(console.log("[Adblock Detector] AdSense script found:",!!e),e){if(void 0===window.adsbygoogle)return console.log("[Adblock Detector] AdSense script blocked - adsbygoogle is undefined"),!0;{console.log("[Adblock Detector] adsbygoogle exists:",window.adsbygoogle.length);const e=document.querySelectorAll("ins.adsbygoogle");console.log("[Adblock Detector] Found ads elements:",e.length);let t=!1;e.forEach(function(e){e.querySelector("iframe")&&(t=!0)}),console.log("[Adblock Detector] Has ad content (iframe):",t),e.length>0&&!t&&console.log("[Adblock Detector] Ads exist but no content loaded yet")}}const t=document.createElement("div");t.innerHTML="&nbsp;",t.className="adsbox",t.style.position="absolute",t.style.left="-10000px",document.body.appendChild(t);const o=0===t.offsetHeight||1===t.offsetHeight||"none"===window.getComputedStyle(t).display||"hidden"===window.getComputedStyle(t).visibility;return console.log("[Adblock Detector] Bait element:",{offsetHeight:t.offsetHeight,display:window.getComputedStyle(t).display,blocked:o}),document.body.contains(t)&&document.body.removeChild(t),o?(console.log("[Adblock Detector] Bait element blocked"),!0):(console.log("[Adblock Detector] No ad blocker detected"),!1)}(),l=!!document.getElementById("adblock-mandatory-prompt");if(n){if(console.log("[Adblock Detector] Ad blocker detected"),e){e=!1;try{localStorage.removeItem("adblock_whitelist"),console.log("[Adblock Detector] Cleared whitelist mark")}catch(e){}}l?(console.log("[Adblock Detector] Prompt exists, ensuring body overflow is hidden"),document.body.style.overflow="hidden"):(console.log("[Adblock Detector] Prompt was removed, recreating"),function(){console.log("[Adblock Detector] Creating mandatory prompt");const e=document.getElementById("adblock-mandatory-prompt");e&&e.remove();const t=document.createElement("div");t.id="adblock-mandatory-prompt",t.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.15);\n        z-index: 999999;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        backdrop-filter: blur(20px) saturate(180%);\n        -webkit-backdrop-filter: blur(20px) saturate(180%);\n      ";const o=document.createElement("div");o.style.cssText="\n        max-width: 520px;\n        width: 90%;\n        padding: 2.5rem;\n        background: rgba(255, 255, 255, 0.85);\n        border-radius: 16px;\n        text-align: center;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n        border: 1px solid rgba(255, 255, 255, 0.18);\n        color: var(--text-p1);\n        font-size: 16px;\n        line-height: 1.6;\n        animation: slideIn 0.3s ease-out;\n      ";const n=document.createElement("style");n.textContent="\n        @keyframes slideIn {\n          from {\n            opacity: 0;\n            transform: translateY(-20px) scale(0.95);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n        @keyframes pulse {\n          0%, 100% {\n            transform: scale(1);\n          }\n          50% {\n            transform: scale(1.05);\n          }\n        }\n      ",document.head.appendChild(n);const l=document.createElement("div");l.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">\n          <circle cx="12" cy="12" r="10"></circle>\n          <line x1="15" y1="9" x2="9" y2="15"></line>\n          <line x1="9" y1="9" x2="15" y2="15"></line>\n        </svg>\n      ',l.style.cssText="\n        margin: 0 auto 1.5rem auto;\n        color: var(--theme-color);\n        animation: pulse 2s ease-in-out infinite;\n      ";const c=document.createElement("h2");c.textContent="检测到广告拦截器",c.style.cssText="\n        font-size: 22px;\n        font-weight: 600;\n        margin: 0 0 1.5rem 0;\n        color: var(--text-p1);\n      ";const r=document.createElement("div");r.innerHTML='\n        <p style="margin: 0 0 1.5rem 0; color: var(--text-p2); line-height: 1.8; font-size: 15px;">\n          检测到广告拦截器，辛苦您放行本站，创作不易，感谢您的支持。\n        </p>\n        <div style="text-align: left; background: var(--block); padding: 1.25rem 1.5rem; border-radius: 12px; margin: 0 auto 1.5rem auto; font-size: 14px; line-height: 1.8; color: var(--text-p2);">\n          <div style="margin-bottom: 0.75rem; display: flex; align-items: flex-start;">\n            <span style="color: var(--theme-color); font-weight: 600; margin-right: 0.5rem; min-width: 60px;">方法 1</span>\n            <span style="flex: 1;">暂时关闭广告拦截插件，然后刷新本页面</span>\n          </div>\n          <div style="display: flex; align-items: flex-start;">\n            <span style="color: var(--theme-color); font-weight: 600; margin-right: 0.5rem; min-width: 60px;">方法 2</span>\n            <span style="flex: 1;">将本站加入白名单或信任列表，然后刷新本页面</span>\n          </div>\n        </div>\n      ';const d=document.createElement("button");d.className="btn",d.textContent="刷新页面",d.style.cssText="\n        padding: 0.625rem 2rem;\n        background: var(--theme-color);\n        color: white;\n        border: none;\n        border-radius: 8px;\n        font-size: 15px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: all 0.2s;\n      ",d.onmouseover=function(){this.style.opacity="0.85",this.style.transform="translateY(-1px)"},d.onmouseout=function(){this.style.opacity="1",this.style.transform="translateY(0)"},d.onclick=function(){location.reload()},o.appendChild(l),o.appendChild(c),o.appendChild(r),o.appendChild(d),t.appendChild(o),document.body.appendChild(t),document.body.style.overflow="hidden",console.log("[Adblock Detector] Mandatory prompt displayed")}())}else{if(console.log("[Adblock Detector] No ad blocker detected"),!e){e=!0;try{localStorage.setItem("adblock_whitelist","true"),console.log("[Adblock Detector] Site marked as whitelisted")}catch(e){}t&&(clearInterval(t),t=null,console.log("[Adblock Detector] Stopping periodic checks"))}if(l){document.getElementById("adblock-mandatory-prompt").remove(),document.body.style.overflow="",console.log("[Adblock Detector] Removed prompt as ads are now allowed")}}}setTimeout(function(){console.log("[Adblock Detector] Starting initial detection"),o(),t||(t=setInterval(function(){console.log("[Adblock Detector] Running periodic check"),o()},3e4),console.log("[Adblock Detector] Started periodic checks (30s interval)"))},3e3)}console.log("[Adblock Detector] Script loaded"),"loading"===document.readyState?(console.log("[Adblock Detector] Waiting for DOMContentLoaded"),document.addEventListener("DOMContentLoaded",e)):(console.log("[Adblock Detector] DOM ready, executing immediately"),e())}();